/*! UIkit 3.0.0-beta.34 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitparallax",t):e.UIkitParallax=t()}(this,function(){"use strict";function e(t){function i(e,t){return c(e*(1-(t-t*e)))}function r(e,t){return u(u(e,"color",t),"color").split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return b(e)})}function a(e,t){var i=e.length-1,r=Math.min(Math.floor(i*t),i-1),a=e.slice(r,r+2);return a.push(1===t?1:t%(1/i)*i),a}function n(e,t){var i=a(e,t),r=i[0],n=i[1],s=i[2];return(f(r)?r+Math.abs(r-n)*s*(r<n?1:-1):+n).toFixed(2)}if(!e.installed){var s=t.mixin,o=t.util,c=o.clamp,u=o.css,l=o.Dimensions,p=o.each,h=o.getImage,d=o.includes,f=o.isNumber,g=o.isUndefined,m=o.scrolledOver,b=o.toFloat,v=o.query,k=o.win,x=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];s.parallax={props:x.reduce(function(e,t){return e[t]="list",e},{media:"media"}),defaults:x.reduce(function(e,t){return e[t]=void 0,e},{media:!1}),computed:{props:function(e,t){var i=this;return x.reduce(function(a,n){if(g(e[n]))return a;var s,o,c,l=n.match(/color/i),p=l||"opacity"===n,h=e[n].slice(0);p&&u(t,n,""),h.length<2&&h.unshift(("scale"===n?1:p?u(t,n):0)||0);var f=d(h.join(""),"%")?"%":"px";if(l){var m=t.style.color;h=h.map(function(e){return r(t,e)}),t.style.color=m}else h=h.map(b);if(n.match(/^bg/))if(u(t,"background-position-"+n[2],""),o=u(t,"backgroundPosition").split(" ")["x"===n[2]?0:1],i.covers){var v=Math.min.apply(Math,h),k=Math.max.apply(Math,h),x=h.indexOf(v)<h.indexOf(k);c=k-v,h=h.map(function(e){return e-(x?v:k)}),s=(x?-c:0)+"px"}else s=o;return a[n]={steps:h,unit:f,pos:s,bgPos:o,diff:c},a},{})},bgProps:function(){var e=this;return["bgx","bgy"].filter(function(t){return t in e.props})},covers:function(e,t){return"cover"===u(""!==t.style.backgroundSize?u(t,"backgroundSize",""):t,"backgroundSize")}},disconnected:function(){delete this._image},update:[{read:function(){var e=this;if(delete this._computeds.props,this._active=!this.media||k.matchMedia(this.media).matches,this._image&&(this._image.dimEl={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),g(this._image)&&this.covers&&this.bgProps.length){var t=u(this.$el,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");t&&(this._image=!1,h(t).then(function(t){e._image={width:t.naturalWidth,height:t.naturalHeight},e.$emit()}))}},write:function(){var e=this;if(this._image)if(this._active){var t=this._image,i=t.dimEl,r=l.cover(t,i);this.bgProps.forEach(function(a){var n=e.props[a],s=n.diff,o=n.bgPos,c=n.steps,u="bgy"===a?"height":"width",p=r[u]-i[u];o.match(/%$|0px/)&&(p<s?i[u]=r[u]+s-p:p>s&&(o=parseFloat(o))&&(e.props[a].steps=c.map(function(e){return e-(p-s)/(100/o)})),r=l.cover(t,i))}),u(this.$el,{backgroundSize:r.width+"px "+r.height+"px",backgroundRepeat:"no-repeat"})}else u(this.$el,{backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]}],methods:{reset:function(){var e=this;p(this.getCss(0),function(t,i){return u(e.$el,i,"")})},getCss:function(e){var t=!1,i=this.props;return Object.keys(i).reduce(function(r,s){var o=i[s],c=o.steps,u=o.unit,l=o.pos,p=n(c,e);switch(s){case"x":case"y":if(t)break;var h=["x","y"].map(function(t){return s===t?p+u:i[t]?n(i[t].steps,e)+i[t].unit:0}),d=h[0],f=h[1];t=r.transform+=" translate3d("+d+", "+f+", 0)";break;case"rotate":r.transform+=" rotate("+p+"deg)";break;case"scale":r.transform+=" scale("+p+")";break;case"bgy":case"bgx":r["background-position-"+s[2]]="calc("+l+" + "+(p+u)+")";break;case"color":case"backgroundColor":case"borderColor":var g=a(c,e),m=g[0],v=g[1],k=g[2];r[s]="rgba("+m.map(function(e,t){return e+=k*(v[t]-e),3===t?b(e):parseInt(e,10)}).join(",")+")";break;case"blur":r.filter+=" blur("+p+"px)";break;case"hue":r.filter+=" hue-rotate("+p+"deg)";break;case"fopacity":r.filter+=" opacity("+p+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":r.filter+=" "+s+"("+p+"%)";break;default:r[s]=p}return r},{transform:"",filter:""})}}},t.component("parallax",{mixins:[s.parallax],props:{target:String,viewport:Number,easing:Number},defaults:{target:!1,viewport:1,easing:1},computed:{target:function(e,t){var i=e.target;return i&&v(i,t)||t}},disconnected:function(){delete this._prev},update:[{read:function(){this._percent=i(m(this.target)/(this.viewport||1),this.easing)},write:function(e){"scroll"!==e.type&&delete this._prev,this._active?this._prev!==this._percent&&(u(this.$el,this.getCss(this._percent)),this._prev=this._percent):this.reset()},events:["scroll","load","resize"]}]})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e),e});