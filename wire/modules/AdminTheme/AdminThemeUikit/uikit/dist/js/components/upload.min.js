/*! UIkit 3.0.0-beta.34 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitupload",t):e.UIkitUpload=t()}(this,function(){"use strict";function e(t){function r(e,t){return t.match(new RegExp("^"+e.replace(/\//g,"\\/").replace(/\*\*/g,"(\\/[^\\/]+)*").replace(/\*/g,"[^\\/]+").replace(/((?!\\))\?/g,"$1.")+"$","i"))}function a(e,t){for(var r=[],a=0;a<e.length;a+=t){for(var n=[],o=0;o<t;o++)n.push(e[a+o]);r.push(n)}return r}function n(e){e.preventDefault(),e.stopPropagation()}if(!e.installed){var o=t.util,i=o.addClass,l=o.ajax,s=o.matches,u=o.noop,d=o.on,f=o.removeClass,p=o.trigger;t.component("upload",{props:{allow:String,clsDragover:String,concurrent:Number,mime:String,msgInvalidMime:String,msgInvalidName:String,multiple:Boolean,name:String,params:Object,type:String,url:String},defaults:{allow:!1,clsDragover:"uk-dragover",concurrent:1,mime:!1,msgInvalidMime:"Invalid File Type: %s",msgInvalidName:"Invalid File Name: %s",multiple:!1,name:"files[]",params:{},type:"POST",url:"",abort:u,beforeAll:u,beforeSend:u,complete:u,completeAll:u,error:u,fail:u,load:u,loadEnd:u,loadStart:u,progress:u},events:{change:function(e){s(e.target,'input[type="file"]')&&(e.preventDefault(),e.target.files&&this.upload(e.target.files),e.target.value="")},drop:function(e){n(e);var t=e.dataTransfer;t&&t.files&&(f(this.$el,this.clsDragover),this.upload(t.files))},dragenter:function(e){n(e)},dragover:function(e){n(e),i(this.$el,this.clsDragover)},dragleave:function(e){n(e),f(this.$el,this.clsDragover)}},methods:{upload:function(e){var t=this;if(e.length){p(this.$el,"upload",[e]);for(var n=0;n<e.length;n++){if(t.allow&&!r(t.allow,e[n].name))return void t.fail(t.msgInvalidName.replace(/%s/,t.allow));if(t.mime&&!r(t.mime,e[n].type))return void t.fail(t.msgInvalidMime.replace(/%s/,t.mime))}this.multiple||(e=[e[0]]),this.beforeAll(this,e);var o=a(e,this.concurrent),i=function(e){var r=new FormData;e.forEach(function(e){return r.append(t.name,e)});for(var a in t.params)r.append(a,t.params[a]);l(t.url,{data:r,method:t.type,beforeSend:function(e){var r=e.xhr;r.upload&&d(r.upload,"progress",t.progress),["loadStart","load","loadEnd","abort"].forEach(function(e){return d(r,e.toLowerCase(),t[e])}),t.beforeSend(e)}}).then(function(e){t.complete(e),o.length?i(o.shift()):t.completeAll(e)},function(e){return t.error(e.message)})};i(o.shift())}}}})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e),e});